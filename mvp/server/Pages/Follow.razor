@page "/{username}/follow"
@using Repos;
@inject IMiniMain MiniMain
@inject IUserState UserState
@inject IUserState UserState
@inject NavigationManager NavigationManager

@code {
    [Parameter]
    public string username { get; set; }
    protected override async Task OnInitializedAsync()
    {
        if (UserState.User.user_id <= -1) NavigationManager.NavigateTo("timeline");

        await MiniMain.FollowUser(UserState.User.username, username);

        @* FollowerRepository.FollowUser(MiniMain.User.username, username); *@

        MiniMain.FlashedMessages = new [] 
        { 
            "You are now following " + username 
        };

        NavigationManager.NavigateTo(MiniMain.UrlForUser(username));
    }
}