@page "/{username}/unfollow"
@using Repos;
@inject IMiniMain MiniMain
@inject IUserState UserState
@inject NavigationManager NavigationManager

@code {
    [Parameter]
    public string username { get; set; }

    protected override void OnInitialized()
    {
        if (UserState.User.user_id <= -1) NavigationManager.NavigateTo("timeline");

        MiniMain.UnfollowUser(UserState.User.username, username);

        @* FollowerRepository.UnfollowUser(UserState.User.username, username); *@

        MiniMain.FlashedMessages = new [] 
        { 
            "You are no longer following " + username 
        };

        NavigationManager.NavigateTo(MiniMain.UrlForUser(username));
    }
}